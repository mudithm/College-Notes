<h1>Lecture 3</h1>

---

<h4>Text Processing Tools</h4>

  * `wc`: outputs a one line report of lines, rows and bytes
      - `cat file | wc <options>`
      - `ls /path -l | wc -l` gives the number of lines in the ls output 
  * `head`: extract top of files
      - `head -n 5` gives the first 5 lines
      - `cat file.txt | head -n 5` piped input from `cat`
  * `tail`: extracts bottom of files
      - `tail -n 5` Gives the last 5 lines
      - `cat file.txt | tail -n 5` piped input from `cat`

---

<h4>Locale</h4>
  
  * A locale:
      - Set of parameters that define a user's cultural preferences
          + language
          + country
          + other area-specific things
  * `locale` command:
      - prints information about the current locale environment to standard output

---

<h4><code>diff</code></h4>

  * compares two files and returns the differences between them
  * primarily used with the `-u` option
  * Usage:
      - `diff -u file1 file2`
      - or, without `-u`, `diff file1 file2`
  * The `-u` flag makes the output more understandable
  * Helpful for finding difference between source code files, for example if a teammate makes changes and sends you a new version

---

<h4><code>wget</code></h4>

  * Retrieves content from web servers
  * Usage: `wget <url>` 
      - If it is a regular url, it will download the html page itself
      - If it is a file url, it will download the file
      - If you don't specify a download path, it will download in the current directory

---

<h4>Emacs</h4>

  * `C-x d (dired)`: creates an Emacs buffer that contains the contents of a file
  * `M-!`: run shell commands
  * IDE:
      - compile programs: `M-x compile ENTER`
  * 80 column restriction in emacs:
      - Add the following to `~/.emacs`: 
          + `(setq-default fill-column 80)`
      - Turn on auto-fill mode
          + `M-x auto-fill-mode` or
          + `M-q` to autowrap individual paragraphs

---

<h4>Carriage Returns</h4>

  * In Linux, `\n` represents new line
  * In windows, this will be `\r\n`, or a carriage return followed by a line feed
  * These can cause some corruption of files between OS, so make sure to remove them

---

<h4>Environment Variables</h4>

  * Can be accessed from any child process
  * Common ones:
      - `HOME`: path to the home directory
      - `PATH`: list of directories to search in for a command to execute
      - Change value:
          + `export <VARIABLE>=...` 
  * `LC` environment variables:
      - Ex: `LC_TIME` for date and time, `LC_NUMERIC` for non-monetary numeric formats, `LC_COLLATE` for comparing and sorting
      - These variables give information to the `locale` command
      - `LC_COLLATE` Examples:
          + `LC_COLLATE='c'`: sorting in ASCII order
          + `LC_COLLATE='en_US'`: sorts in case insensitive, except when the two strings are otherwise equal and one has an uppercase letter earlier than the other

---

<h4>The 'C' Locale</h4>

  * Default locale
  * environment of "least surprise"

---

<h4><code>sort</code>, <code>comm</code>, and <code>tr</code></h4>

  * `sort`: sorts lines of text files
      - Usage: `sort <options> ... <file> ...`
      - Sort order depends on the locale
      - C locale: ascii sorting
  * `comm`: compare two sorted files line by line
      - Usage: `comm <options> ... file file2 `
          + requires 2 files, must be sorted according to `LC_COLLATE` 
  * `tr`: translate or delete characters
      - Usage: `tr <option> ... SET1 <SET2>`
      - `cat file1 | tr 'a-cm-o' '123abc`
          + translates a to 1, b to 2, c to 3, and m to a, n to b, and 0 to c
      - `cat file2 | tr -d 'akm' > file1`
          + removes all a's, k's, and m's in file2 and puts the result in file1

>Note about pipelining: you cannot normally read and later write to the same file in one command.

---

<h2>Scripting and the Shell</h2>

---

<h4>The Shell and the OS</h4>

  * shell: user interface to OS
  * Accepts commands as text, uses OS API to carry them out
  * Common shells: `bash`, `csh`, `ksh` 
  * `Bash` is an interpreted language, which means it is portable but much slower to execute than a compiled language like `C++` 

---

<h4>Scripts: First Line</h4>

  * Shell script file is a file with shell commands
  * When shell script is executed, 
      - new "shell" child process is spawned
      - first line is used to state which child shell to use
          + `#! /bin/sh` 
          + `sh` is a symbolic link to the current shell, usually `bash`
          + `#! /bin/bash`, etc.
      - Tells the computer which interpreter to use
