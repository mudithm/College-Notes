<h1>Lecture 15</h1>

---

<h4>Libraries:</h4>

  * Pre-compiled obj files that are packaged together and provide similar functionality
  * Made available to other devs to enable modular programming
  * Linux supports 2 types;
      - Static (*.a files)
      - Dynamic (*.so files)
  * Locations:
  * /usr/lib
  * /usr/include
  * /usr/.local/lib

<h4>Static vs Shared Libraries</h4>
  
   * Static Libraries
       - statically-linked: linker copies library routines used in the program into the final executable image at compile time
   * Shared Libraries
       - Linking process is deferred until run time
       - The name of the library is placed in the final executable file while the actual linking rakes place at run tie when both executable file and library are placed in the mem
           + Dynamically Linked: linux is responsible for loading upon execution
           + Dynamically Loaded: library is used under program control. Program has to selectively call functions within the library.

---


<h4>Size Comparison</h4>
  
  * `gcc -static hello.c -o hello-static` 
      - Will statically link libraries
  * `gcc hello.c -o hello-dynamic` 
  * `ls -l` to get file size
      - hello.c -> 74 B
      - hello-dynamic -> 14 kB
      - hello-static -> 2 MB
      - As you can see, static loading loads the whole archive containing the included library!


---

<h4>Static Libraries</h4>

  * create a new header file with both signatures

mymath.h
```c
int add(int, int);
int sub(int, int);
```

  * Execute command to create static library:   
      - `ar rs` libmymath.a add.o sub.o
      - `-s`: write the object files into the archive
      - `-r`: insert files with replacement if they already exist
  * the `-I` flag can be used during preprocessing stage to add a directory to the system library path, so the compiler will search for header files there as well

---

